<!DOCTYPE html> 
<html> 
    <head> 
        <title>Welcome to TWMS</title> 

        <meta name = "viewport" content = "user-scalable=no,width=device-width" />

        <link rel="stylesheet" href="css/jquery.mobile-1.1.0.min.css" />
        <link rel="stylesheet" href="css/style.css" />

        <script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
        <script type="text/javascript" src="js/jquery.mobile-1.1.0.min.js"></script>
        <script type="text/javascript" src="js/phonegap-1.4.1.js"></script>
        
        <script type="text/javascript" src="js/camera-all.js"></script>
        <script type="text/javascript" src="js/uploadpic.js"></script>
        
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> 
        <script type="text/javascript" src="js/underscore.min.js"></script>
        <script type="text/javascript" src="js/backbone.min.js"></script>
        <script type="text/javascript" src="js/prettify.min.js"></script>
        <script type="text/javascript" src="js/demo.js"></script>
        <script type="text/javascript" src="js/jquery.ui.map.js"></script>
        
        
        <script type="text/javascript">
             
            document.addEventListener("deviceready",onDeviceReady,false);

            // PhoneGap is ready to be used!
            //
            function onDeviceReady() {
                //Camera and Gallery
                pictureSource=navigator.camera.PictureSourceType;
                destinationType=navigator.camera.DestinationType;
                
                $('#h_link').addClass('ui-disabled');
            }
            
        </script>
        <script type="text/javascript">     
            navigator.geolocation.getCurrentPosition(function(position) {
//                alert(position.coords.latitude + ", " + position.coords.longitude);
                document.getElementById('location-cord').innerHTML = "Lat: <span class=\"cord-value\">" + position.coords.latitude + "</span>, Long: <span class=\"cord-value\">" + position.coords.longitude + "</span>";
                showAddress(position.coords.latitude,position.coords.longitude);
            });
	
            function showAddress(latitude,longitude){
                var mapcoordain = latitude+','+longitude;
                var geocoder = new google.maps.Geocoder();
                var point = new google.maps.LatLng(latitude,longitude);//23.7442812,90.3728129

                if (geocoder) {
                    geocoder.geocode({ 'latLng': point }, function (results, status) {
                        if (status == google.maps.GeocoderStatus.OK) {
                            if (results[0]) {
//                                alert(results[0].formatted_address);
                                document.getElementById('location-name').innerHTML = "<span class=\"cord-value\">" + results[0].formatted_address + "</span>";
                                $(function() { 
                                    demo.add(function() {
                                        $('#map_canvas').gmap({
                                            'center': mapcoordain, 
                                            'zoom': 17, 
                                            'disableDefaultUI':true, 
                                            'callback': function() {
                                                var self = this;
                                                self.addMarker({
                                                    'position': this.get('map').getCenter()
                                                }).click(function() {
                                                    self.openInfoWindow({
                                                        'content': 'Your Current Location'
                                                    }, this);
                                                });	
                                            }
                                        });
                                    }).load();
                                });
                            } 
                            else {
                                console.log('No results found');
                            }
                        } 
                        else {
                            console.log('Geocoder failed due to: ' + status);
                        }
                    });
                }
            }   
        </script>
    </head> 
    <body> 

        <!-- Start of the page: #home -->
        <div data-role="page" id="home" data-theme="b" class="page-containar"> 
            <!-- page 1 | Header   -->
            <div data-role="header" data-theme="d"> 
                <h1>TWMS</h1> 
            </div> <!--END header -->
            <!-- page 1 | content  -->
            <div data-role="content">

                <h1>Welcome to TWMS</h1>
                <p><a href="#photo" data-role="button" data-transition="none" class="main_page_button take_photo" onclick="capturePhoto();">Take Photo</a></p>
                <div id="h_link" class="">
                    <p><a href="#photo" data-role="button" data-transition="none" class="main_page_button" data-theme="b" id="h_link">Send Incident</a></p>
                    <p><a href="#geo-location" data-role="button" data-transition="none" class="main_page_button " data-theme="e" id="h_link">View Location</a></p>
                </div>
                <p><a href="#photo" data-role="button" data-transition="none" data-theme="a" data-icon="info">Your Information</a></p>

            </div><!-- /content --> 

        </div> <!-- /page 1 -->

        <!-- Start of the page: #photo -->
        <div data-role="page" id="photo" data-theme="b"> 
            <!-- page 2 | Header   -->
            <div data-role="header" data-theme="d"> 
                <a href="#home" data-icon="home" data-iconpos="notext" data-direction="reverse">Home</a>
                <h1>TWMS</h1>
                <a href="#geo-location" data-theme="b" data-mini="true" data-icon="forward" data-iconpos="right" data-direction="reverse">Location</a>
            </div> <!--END header -->
            <!-- page 2 | content  -->
            <div data-role="content">

                <div data-role="controlgroup" data-type="horizontal">
                    <a href="index.html" data-role="button">Yes</a>
                    <a href="index.html" data-role="button">No</a>
                    
                </div>

                <div>
                    <img class="image-thumb" id="smallImage" src="" />
                </div>
                <div id="image-display">
                    <div id="camera-iamge" class="image-div">
                        <img style="display:none;width:60px;height:60px; float:left; padding-right:5px;" id="smallImage" src="" />
                    </div>
                    <div id="gallery-image" class="image-div"></div>                    
                </div>

                <div data-role="fieldcontain">
                    <label for="select-choice-1" class="select">Choose from options:</label>
                    <select name="select-choice-1" id="select-choice-1">
                        <option value="o00">Select the Category</option>
                        <option value="o1">Overige meldingen</option>
                        <option value="o2">Schade aan privé objecten</option>
                        <option value="o3">Beschadiging aan gemeentelijke objecten</option>
                        <option value="o4">Zwerfvuil</option>
                        <option value="o5">Zinloos geweld</option>
                        <option value="o6">Openbare vechtpartij</option>
                        <option value="o7">Auto ongeluk</option>
                        <option value="o8">Fiets ongeluk</option>
                        <option value="o9">Hondenpoep</option>
                        <option value="o10">Openbare dronkenschap</option>
                        <option value="o11">Overige geweldmisdrijf</option>
                        <option value="o12">Inbraak</option>
                        <option value="o13">Overige misdrijven</option>

                    </select>
                </div>

                <div data-role="fieldcontain">
                    <label for="textarea">Additional remark:</label>
                    <textarea name="textarea" id="textarea" placeholder="Write a description..."></textarea>
                </div>


            </div><!-- /content --> 

        </div> <!-- /page 2 -->

        <!-- 
        page 3 | Geo location
        .................................................................... -->
        <div data-role="page" id="geo-location" data-theme="b"> 

            <div data-role="header" data-position="fixed" data-theme="d"> 
                <a href="#home" data-icon="home" data-iconpos="notext" data-direction="reverse">Home</a>
                <h1>TWMS</h1> 
                <a href="#submit-info" data-theme="b" data-mini="true" data-icon="forward" data-iconpos="right" data-direction="reverse">Submit</a>
            </div> 
            <!-- page 3 | content  -->
            <div data-role="content" class="box"> 

                <a href="#popup" data-role="button" data-rel="dialog" data-transition="pop">Change Location Manually</a>
                <!--current location on the map-->
                <p> 
                <div id="geo-locaion">
                    <div class="mapGeo">
                        <div>
                            <div id="map_canvas" class="map"></div>
                        </div>
                    </div>
                </div>

                </p>
                <!--location information. coordinate and location name-->
                <p>

                <div id="location-name" class="cord-info"></div>
                </p>
                <p>

                <div id="location-cord" class="cord-info"></div>
                </p>

            </div> <!-- /content3 -->


        </div><!--  /page 3  -->
        
        <!-- 
        page 4 | 
        .................................................................... -->
        <div data-role="page" id="submit-info" data-theme="b"> 

            <div data-role="header" data-position="fixed" data-theme="d"> 
                <a href="#home" data-icon="home" data-iconpos="notext" data-direction="reverse">Home</a>
                <h1>TWMS</h1> 
            </div> 
            <!-- page 4 | content ------------------------------------------ -->
            <div data-role="content"> 
                <label>Family Name:</label>
                <label>Email:</label>
                <label>Category:</label>
                <label>Location:</label>
                    <div id="location-name" class="cord-info"></div>
                <label>Remark:</label>
                
                <a href="#thanks" name="submit_data" data-theme="b" data-direction="reverse" data-ajax="false">Submit</a>
                
                
<!--                 <button type="submit" data-theme="b" name="submit_data" value="submit-data" data-ajax="false">Submit</button>-->
            </div>
            

        </div><!--  /page 4  -->
        
        <!-- 
        page 5 | 
        .................................................................... -->
        <div data-role="page" id="thanks" data-theme="b"> 

            <div data-role="header" data-position="fixed" data-theme="d"> 
                <h1>TWMS</h1> 
            </div> 
            <!-- page 5 | content ------------------------------------------ -->
            <div data-role="content"> 
                <p> <h3>Thank you for submitting the information. </h3> </p>
            </div><!-- /content -->

        </div><!--  /page 5  -->

    </body>
</html>